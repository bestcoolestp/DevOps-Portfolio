# 2025-12-28 — Sticky Sessions (Session Affinity)

**Source:** Stephane Maarek — AWS SAA  
**Theme:** session continuity vs load distribution

> “State makes systems simpler — and harder to scale.”

---

## What I learned (wrap-up)

### What sticky sessions are
**Sticky sessions (session affinity)** ensure a client’s requests are consistently routed to the **same backend instance**.

They’re useful when:
- session data (login state, cart) is stored **locally on the instance**
- continuity across requests matters

Without stickiness, load balancers distribute requests evenly across instances.

---

### How stickiness works
- implemented using **cookies**
- cookie ties a client to a specific backend
- cookie has an **expiration time**
- once expired, traffic may be routed to a different instance

---

### Supported load balancers
- Classic Load Balancer (CLB)
- Application Load Balancer (ALB)
- Network Load Balancer (NLB)

---

### Cookie types

#### Application-based cookies
- generated by the **application**
- custom cookie name
- name must be specified per target group
- reserved names cannot be used  
  (`AWSALB`, `AWSALBAPP`, `AWSALBTG`)
- if ALB generates it → `AWSALBAPP`

#### Duration-based cookies
- generated by the **load balancer**
- cookie names:
  - `AWSALB` (ALB)
  - `AWSELB` (CLB)
- expiration set by the load balancer (1 second → 7 days)

---

### Configuration notes
- enabled at the **target group level**
- can be disabled anytime
- default duration is typically **1 day**

---

### Trade-offs
✅ better user experience through session continuity  
⚠️ potential **load imbalance** if many users stick to the same instance

---

## My takeaway

Sticky sessions improve continuity but reduce flexibility.  
They work best as a **temporary solution**, not a long-term scaling strategy.
